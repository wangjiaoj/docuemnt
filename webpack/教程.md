## 一、构建工具
### 1.构建
构建就是做这件事情，将源代码转换成可执行的JavaScript、css、HTML代码，包括如下内容。
* 代码转换：比如将TypeScript编译成JavaScript、将scss编译成css等。
* 文件优化：压缩JavaScript、css、HTML代码，压缩合并图片等。
* 代码分割：提取多个页面的公共代码，提取屏不需要执行部分的代码让其异步加载。
* 模块合并：在采用模块化的项目里有很多个模块和文件，需要通过构建功能将模块分类合并成一个文件。
* 自动刷新：监昕本地源代码的变化，自动重新构建、刷新浏览器。
* 代码校验：在代码被提交到仓库前需要校验代码是否符合规范，以及单元测试是否通过。
* 自动发布：更新代码后，自动构建出线上发布代码井传输给发布系统。构建其实是工程化、自动化思想在前端开发中的体现，将一系流程用代码去实现，让代码自动化地执这一系列复杂的流程。

### 2.工具

* grunt：任务执行
* gulp：基于流的自动化构建工具
* webpack：打包模块化JavaScript 
* RollUp：和 Webpack 很类似但专注于 ES6 的模块打包工具
在实践中：也可以根据需求，结合使用这些工具

## 二、webpack版本发展历史
webpack v0.1.0(8 year ago)->webpack3(3 years ago)->webpack4(2 years ago)->webpack5(目前还未发布正式版 目前有beta版本可以尝试)
 
 虽然升级过程中一些包和使用语法有调整，也引入了一些rollup等一些好的东西进来，但是基础结构是不变的

## 三、结构
### 1.概念
* Entry ：入口， Webpack 执行构建的第一步将从Entry开始，可抽象成输入。
* Module ：模块，在Webpack 里一切皆模块， 一个模块对应一个文件。Webpack 会从配置的Entry 开始，递归找出所有依赖的模块。
* Chunk ：代码块， 一个Chunk 由多个模块组合而成，用于代码合并与分割。
* Loader ： 模块转换器，用于将模块的原内容按照需求转换成新内容。
* Plugin ： 扩展插件，在Webpack 构建流程中的特定时机会广播对应的事件，插件可以监听这些事件的发生，在特定的时机做对应的事情。
![module&chunk&bundle](./img/moudle&chunk.jpg)


[基本概念](https://juejin.im/post/5cede821f265da1bbd4b5630#heading-6)

### 2.流程概括

## 四、webpack3.0->4.0升级中的额注意事项
一些老项目中已经从webpack3.0->升级到4.0,需要调整的配置
###  4.1 环境及依赖库更新
检查依赖的最低版本

###  4.2 mode环境区分  
添加mode，mode必须为development、production、none中的一个 
区分版本，完成了一些功能集成，比如再次之前压缩混淆代码，需要增加uglify插件，作用域提升(scope hosting)需要增加ModuleConcatenationPlugin。而在 webpack4 中，只需要设置 mode 为 production即可

### 4.3 Webpack 4.x 的破坏性变更

原来uglifyjs-webpack-plugin、optimize-css-assets-webpack-plugin配置在plugins中，现在修改为optimization.minimizer中配置
另外还有一些插件的失效或配置调整，如extract-text-webpack-plugin插件已经不支持webpack4，废弃了。提供的是mini-css-extract-plugin这个插件来做替代品

| 失效的插件或loader   | 类型  |功能说明  |
|  ----  | ----  |----  |
| webpack.optimize.CommonsChunkPlugin  |  内置插件 | 分离Chunk。将多次出现的代码统一打包到一个文件中。Vue工程中用来打包vendor及mainfest |
| webpack.optimize.UglifyJsPlugin	  | 内置插件 |压缩JS |
| extract-text-webpack-plugin  | Loader |分离文件。将部分代码或文件提取到单独文件中。Vue工程里用来分离CSS到指定文件 |	

		
 [webpack4升级](https://blog.csdn.net/harsima/java/article/details/80819747)
		
 



## 五、兼容低版本浏览器IE8
### 5.1.语法转换
1. babel
* ES6->ES5语法转换
2. babelr-polyfill:
 不支持的API转换:
 [API转换](https://www.cnblogs.com/zhishaofei/p/10058132.html)

### 5.2.样式
 autofix postcss
postcss autofix 进行自动补全

 ## 六、loader编写
 
 
 ## 七、plugin编写


 ## 八、优化
 ### 1.tree shaking(V4)
为了学会使用 tree shaking，你必须……

* 使用 ES2015 模块语法（即 import 和 export）。
* 在项目 package.json 文件中，添加一个 "sideEffects" 入口。
* 引入一个能够删除未引用代码(dead code)的压缩工具(minifier)（例如 UglifyJSPlugin）。


升级：


### 2.提取公共代码

### 3.减少目录搜索定位


### 4.happypack开启多进程打包
单进程->多进程打包

### 5.动态链接库dll配置
多项目资源缓存共享，比如现在的前端微服务，多个子应用可以共享dll资源 

[autodll-webpack-plugin](https://github.com/asfktz/autodll-webpack-plugin)
[hard-source-webpack-plugin](https://github.com/mzgoddard/hard-source-webpack-plugin)
[webpack-dll-配置](https://segmentfault.com/a/1190000020485804?utm_source=sf-related)
### 6. scope hoisting作用域提升
好处是：
•代码体积更小，因为函数申明语句产生大量的代码：
•代码在运行时为创建的函数作用域变少了，所以内存开销也变小了。
Scope Hoisting的实现原理其实很简单：分析模块之间的依赖关系，尽可能将被打散的模块合并到一个函数中，但前提是不能造成代码元余。因此只有那些被引用了一次的模块才能被合井。由于Scope Hoisting需要分析模块之间的依赖关系，因此源码必须采用ES6模块化语句。

作用域提升(scope hosting)配置好，webpack内置的ModuleConcatenationPlugin即可,webpack4则通过mode

 


### 6.性能分析工具
webpack-analyse可视化工具，可以看到自己代码模块之间的依赖关系
webpack-bundle-analyzer 